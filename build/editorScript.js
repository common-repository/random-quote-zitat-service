(()=>{"use strict";var e,t={712:()=>{const e=window.React,t=window.wp.i18n,r=window.wp.blocks,a=JSON.parse('{"N9":"random-quote-zitat-service/random-quote"}'),n=window.wp.blockEditor,o=window.wp.element,l=window.wp.components,s="https://api.zitat-service.de/v1",u=1e4,c=["en","de","es","ja","uk"],i=["all","frontend",...c];function g(e){return c.includes(e)?e:"en"}function d(e){return i.includes(e)?e:"all"}function m(e){return"number"==typeof e&&e>=-1&&e<=1e4?e:-1}function h(e){"undefined"!=typeof localStorage&&"true"===localStorage.getItem("debugMode")&&console.log(e)}function v(e){"undefined"!=typeof localStorage&&"true"===localStorage.getItem("debugMode")&&console.error(e)}function f(e,t){return null===e||""===e||null===t||""===t||!Number.isInteger(Number(t))||Number(t)<0?"":`&${e}=${t}`}const p=({onChange:r,value:a})=>(h("SelectControlLanguage()"),(0,e.createElement)(l.SelectControl,{label:(0,t.__)("Language","random-quote-zitat-service"),value:a,options:[{label:"*",value:"all"},{label:"Frontend",value:"frontend"},{label:"ðŸ‡©ðŸ‡ª de",value:"de"},{label:"ðŸ‡¬ðŸ‡§ en",value:"en"},{label:"ðŸ‡ªðŸ‡¸ es",value:"es"},{label:"ðŸ‡¯ðŸ‡µ ja",value:"ja"},{label:"ðŸ‡ºðŸ‡¦ uk",value:"uk"}],onChange:r})),E=({onChange:r,value:a})=>{const[n,c]=(0,o.useState)([]),[i,g]=(0,o.useState)(!1),d=s+"/users?size="+u;h(`SelectControlUser() url=${d}`),(0,o.useEffect)((()=>{i||fetch(d).then((e=>e.json())).then((e=>{c(e.users),g(!0)})).catch((e=>{v("Error fetching users: "+e)}))}),[i,d]);const m=[{label:"*",value:-1},...n.map((e=>({label:e.login,value:e.id})))];return(0,e.createElement)(l.SelectControl,{label:(0,t.__)("User","random-quote-zitat-service"),value:a,options:m,onChange:r})},b=({userLanguage:r,onChange:a,value:n})=>{const[c,i]=(0,o.useState)([]),[d,m]=(0,o.useState)(!1),f=s+"/categories?size="+u+"&language="+g(r);h(`SelectControlCategory(${r}) url=${f}`),(0,o.useEffect)((()=>{d||fetch(f).then((e=>e.json())).then((e=>{i(e.categories),m(!0)})).catch((e=>{v("Error fetching categories: "+e)}))}),[d,f]);const p=[{label:"*",value:-1},...c.map((e=>({label:e.category,value:e.id})))];return(0,e.createElement)(l.SelectControl,{label:(0,t.__)("Category","random-quote-zitat-service"),value:n,options:p,onChange:a})};function w(e){let t="";return e&&(e.lastname&&(t+=e.lastname),e.firstname&&(t+=", "+e.firstname)),t}const C=({userLanguage:r,onChange:a,value:n})=>{const[c,i]=(0,o.useState)([]),[d,m]=(0,o.useState)(!1),f=s+"/authors?size="+u+"&language="+g(r);h(`SelectControlAuthor(${r}) url=${f}`),(0,o.useEffect)((()=>{d||fetch(f).then((e=>e.json())).then((e=>{i(e.authors),m(!0)})).catch((e=>{v("Error fetching authors: ")}))}),[d,f]);const p=[{label:"*",value:-1},...c.map((e=>({label:w(e),value:e.authorId})))];return(0,e.createElement)(l.SelectControl,{label:(0,t.__)("Author","random-quote-zitat-service"),value:n,options:p,onChange:a})},S=({isLoaded:t,quoteData:r,useBlockProps:a})=>(0,e.createElement)("div",{...a()},t?(0,e.createElement)("div",{className:"zitat-service-quote"},(0,e.createElement)("div",{className:"quote"},r.errorMessage?(0,e.createElement)("div",{className:"error"},(0,e.createElement)("span",null,"Error: ",r.errorMessage)):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"quotation"},(0,e.createElement)("a",{href:r.link,target:"_blank",rel:"noopener noreferrer"},r.quote)),(r.source||0!==r.authorId)&&(0,e.createElement)("div",{className:"source"},0!==r.authorId&&(r.authorLink?(0,e.createElement)("a",{href:r.authorLink},r.authorName):(0,e.createElement)("span",null,r.authorName)),r.source&&(r.sourceLink?(0,e.createElement)("span",null,(0,e.createElement)("a",{href:r.sourceLink},(0!==r.authorId?", ":"")+r.source)):(0,e.createElement)("span",null,(0!==r.authorId?", ":"")+r.source)))))):(0,e.createElement)("div",{className:"zitat-service-quote"},"...")),y=(0,e.createElement)("svg",{version:"1.1",id:"svg1",width:"273.06668",height:"273.06668",viewBox:"0 0 273.06668 273.06668",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"m 188.80413,12.525098 c -14.8722,5.75363 -13.95337,34.263788 -9.09712,46.141572 3.07718,7.526416 9.9435,14.297168 18.69219,10.941569 15.53558,-5.958757 14.17641,-32.614243 9.74402,-45.074904 -2.87754,-8.089584 -9.96624,-15.6343274 -19.33909,-12.008237 m -135.470794,3.474903 -2.137447,45.866669 0.03374,16.719337 15.970371,11.013998 c 0.557438,-7.063494 0.766068,-17.941977 6.816463,-22.823048 4.179037,-3.371387 11.812078,-1.518995 16.650204,-0.948145 11.608119,1.369662 23.535799,1.517334 35.199999,2.437858 l -33.804938,94.93334 -33.395062,96 c 20.55005,-3.87184 41.23974,-7.13927 61.86667,-10.58107 6.24726,-1.04241 19.10352,-1.00957 23.93169,-5.2675 6.02889,-5.31681 7.53232,-24.38675 9.13498,-32.15143 l -14.93334,-5.33333 c -4.828,16.97392 -22.512,17.45117 -38.4,18.13333 L 173.86668,28.800002 113.06667,22.223048 53.333336,16.000001 m 129.066674,119.466669 3.2,-24.53333 c 5.3786,10.71688 3.2,24.57959 3.2,36.26667 v 57.6 c 0,9.54867 -1.47674,20.51042 0.55309,29.86667 3.20283,14.76305 21.95972,21.95464 33.22963,10.43869 7.92879,-8.10191 7.53978,-18.44587 9.95062,-28.57203 l -18.13334,-5.33333 c 0,-25.22855 1.83693,-50.47254 2.13745,-75.73334 0.11652,-9.7944 1.80537,-18.97768 0.0774,-28.8 -2.6449,-15.034162 -11.54531,-30.837499 -28.88148,-29.766259 -18.05976,1.11595 -31.57755,32.065919 -22.37119,47.675739 2.98384,5.05924 11.89338,8.48862 17.03786,10.89052 z"}));(0,r.registerBlockType)(a.N9,{title:(0,t.__)("Random Quote","random-quote-zitat-service"),description:(0,t.__)("Displays a random quote from the collection of the user community zitat-service.de.","random-quote-zitat-service"),edit:function({attributes:r,setAttributes:a}){const{language:u,userId:c,authorId:i,categoryId:w}=r,[y,I]=(0,o.useState)({}),[_,k]=(0,o.useState)(!1),q=(0,t.getLocaleData)(),N=q[""]?.lang;return h(`Edit() userLanguage=${N}`),(0,o.useEffect)((()=>{(async function(e,t){const{language:r,userId:a,authorId:n,categoryId:o}=e;let l="";try{l=`${s}/quote?V_1.4.3_B`+function(e,t){return h(`checkLanguageForParameter(${e}, ${t})`),"all"===e?"":("frontend"===e&&null!==t&&(e=t),`&language=${g(e)}`)}(r,t)+f("userId",a)+f("authorId",n)+f("categoryId",o);const e=await fetch(l);if(!e.ok){const t="response is not JSON parsable";let r;try{r=await e.json()}catch(e){throw v(t+" 1: "+JSON.stringify(r)),new Error(t)}if(r&&r.error&&r.error.statusCode&&r.error.message)throw new Error(r.error.statusCode+" â€“ "+r.error.message);throw v(t+" 2: "+JSON.stringify(r)),new Error(t)}const u=await e.json();return h("fetchQuote() returns "+JSON.stringify(u)),u}catch(e){return v("Error fetching the data from url '"+l+"': "+e.message),{errorMessage:e.message}}})(r,N).then((e=>{I(e),k(!0),h("Edit() "+JSON.stringify(e))}))}),[r,N,u,c,i,w]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,t.__)("Settings","random-quote-zitat-service")},(0,e.createElement)(p,{onChange:e=>{a({language:d(e)})},value:d(u)}),(0,e.createElement)(E,{onChange:e=>{a({userId:m(parseInt(e,10))})},value:m(c)}),(0,e.createElement)(b,{userLanguage:N,onChange:e=>{a({categoryId:m(parseInt(e,10))})},value:m(w)}),(0,e.createElement)(C,{userLanguage:N,onChange:e=>{a({authorId:m(parseInt(e,10))})},value:m(i)}))),(0,e.createElement)(S,{isLoaded:_,quoteData:y,useBlockProps:n.useBlockProps}))},icon:{src:y,foreground:"#208020"},save:()=>(0,e.createElement)("div",{className:"zitat-service-quote"},"...")})}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,r,n,o)=>{if(!r){var l=1/0;for(i=0;i<e.length;i++){for(var[r,n,o]=e[i],s=!0,u=0;u<r.length;u++)(!1&o||l>=o)&&Object.keys(a.O).every((e=>a.O[e](r[u])))?r.splice(u--,1):(s=!1,o<l&&(l=o));if(s){e.splice(i--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[r,n,o]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={280:0,616:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[l,s,u]=r,c=0;if(l.some((t=>0!==e[t]))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(u)var i=u(a)}for(t&&t(r);c<l.length;c++)o=l[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(i)},r=globalThis.webpackChunkrandom_quote_zitat_service=globalThis.webpackChunkrandom_quote_zitat_service||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=a.O(void 0,[616],(()=>a(712)));n=a.O(n)})();